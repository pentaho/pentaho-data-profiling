<!--
  ~ This program is free software; you can redistribute it and/or modify it under the
  ~ terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
  ~ Foundation.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License along with this
  ~ program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
  ~ or from the Free Software Foundation, Inc.,
  ~ 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  ~ without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~ See the GNU Lesser General Public License for more details.
  ~
  ~ Copyright 2014 Pentaho Corporation. All rights reserved.
  -->

<assembly>

  <id>standalone</id>

  <formats>
    <format>zip</format>
  </formats>

  <fileSets>

    <!-- Expanded Karaf Standard Distribution -->
    <fileSet>
      <directory>${project.build.directory}/dependencies/apache-karaf-${karaf.version}</directory>
      <outputDirectory>/apache-karaf-${karaf.version}</outputDirectory>
      <excludes>
        <exclude>etc/org.apache.karaf.features.cfg</exclude>
        <exclude>etc/startup.properties</exclude>
        <exclude>etc/custom.properties</exclude>
        
        <exclude>**/demos/**</exclude>
        <exclude>LICENSE</exclude>
        <exclude>NOTICE</exclude>
        <exclude>README</exclude>
        <exclude>RELEASE-NOTES</exclude>
        <exclude>karaf-manual*.html</exclude>
        <exclude>karaf-manual*.pdf</exclude>
      </excludes>
    </fileSet>

    <fileSet>
      <directory>${project.build.directory}/classes/standalone/karaf/</directory>
      <lineEnding>unix</lineEnding>
      <outputDirectory>/apache-karaf-${karaf.version}</outputDirectory>
      <excludes>
        <exclude>**/*.formatted</exclude>
      </excludes>
      <fileMode>0644</fileMode>
    </fileSet>

    <fileSet>
      <directory>${project.build.directory}/classes/shared/karaf/</directory>
      <lineEnding>unix</lineEnding>
      <outputDirectory>/apache-karaf-${karaf.version}</outputDirectory>
      <excludes>
        <exclude>**/*.formatted</exclude>
      </excludes>
      <fileMode>0644</fileMode>
    </fileSet>

    <fileSet>
      <directory>${project.build.directory}/standalone-features-repo</directory>
      <outputDirectory>/apache-karaf-${karaf.version}/system</outputDirectory>
    </fileSet>
    
    <fileSet>
      <directory>${project.build.directory}/standalone-lib-repo</directory>
      <outputDirectory>/apache-karaf-${karaf.version}/lib</outputDirectory>
    </fileSet>
  </fileSets>


</assembly>
